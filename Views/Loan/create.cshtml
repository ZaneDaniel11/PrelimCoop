@model PrelimCoop.Entities.LoanDb;

<form asp-action="Create" method="post">
     <div class="form-row">
      <div class="input-data">
         <label for="">Client</label>
         <input asp-for="Client" class="form-row" />
         <div class="underline"></div>
      </div>
      <div class="input-data">
         <label for="cars">Type:</label>
         <select asp-for="Type" id="cars" name="cars">
            <option value="0.1">Daily</option>
            <option value="0.3">Weekly</option>
            <option value="0.5">Monthly</option>
         </select>
      </div>
   </div>

   <div class="form-row">
      <div class="input-data">
         <label for="">Amount</label>
         <input asp-for="Amount" id="amount" class="form-row" />
         <div class="underline"></div>
      </div>
      <div class="input-data">
         <label for="">Interest</label>
         <input id="interest" asp-for="Interest" class="form-row" />
         <div class="underline"></div>
      </div>
   </div>


   <div class="form-row">
      <div class="input-data">
         <label for="">No of Payment</label>
         <input asp-for="NoOfPayment" id="noOfPayment" class="form-row" />
         <div class="underline"></div>

      </div>
      <div class="input-data">
         <label for="">Deduction</label>
         <input asp-for="Deduction" id="deduction" class="form-row" />
         <div class="underline"></div>

      </div>
   </div>

   <div class="form-row">
      <div class="input-data">
         <label for="">Status</label>
         <input asp-for="Status" class="form-row" />
         <div class="underline"></div>

      </div>

      <div class="input-data">
         <label for="">Date Created</label>
         <input asp-for="DateCreated" type="date" class="form-row" />
         <div class="underline"></div>
      </div>
   </div>

   <div class="form-row">
      <div class="input-data">
         <label for="">Reciebale Amount</label>
         <input asp-for="RecievableAmount" id="receivableAmount" type="number" class="form-row" />
         <div class="underline"></div>

      </div>

      <div class="input-data">
         <label for="">Due Date</label>
         <input asp-for="DueDate" type="date" class="form-row" />
         <div class="underline"></div>


      </div>
   </div>

 
   <div class="form-row submit-btn">
      <div class="input-data">
         <div class="inner"></div>
         <input type="submit" value="submit">
      </div>
   </div>
</form>

<script>
   const typeSelect = document.getElementById('cars');
   const interestInput = document.getElementById('interest');
   const noOfPaymentInput = document.getElementById('noOfPayment');
   const deductionInput = document.getElementById('deduction');
   const amountInput = document.getElementById('amount');
   const receivableAmountInput = document.getElementById('receivableAmount');

   typeSelect.addEventListener('change', function() {
      const selectedType = parseFloat(this.value);
      let defaultInterest = 0.05;

      if (selectedType === 0.1) {
         defaultInterest = 0.01; 
      } else if (selectedType === 0.3) {
         defaultInterest = 0.03;
      } else if (selectedType === 0.5) {
         defaultInterest = 0.05;
      }

      const calculatedInterest = selectedType * defaultInterest;
      interestInput.value = calculatedInterest.toFixed(2);

      const noOfPayment = parseFloat(noOfPaymentInput.value);
      const deduction = parseFloat(deductionInput.value);
      const amount = parseFloat(amountInput.value);

      const receivableAmount = amount * calculatedInterest + (noOfPayment + deduction);
      const result = amount - receivableAmount;
      receivableAmountInput.value = result.toFixed(2);
   });
</script>
