@model PrelimCoop.Entities.LoanDb;

<form asp-action="Create" method="post">
<div class="row g-3">
   <div class="col">
      <label for="">Client</label>
      <input type="text" class="form-control" placeholder="Client" asp-for="Client">
   </div>
   <div class="col">
      <label for="">Status</label>
      <input type="text" class="form-control" placeholder="Status"  asp-for="Status">
   </div>
</div>

<div class="row g-3">
   <div class="col">
      <label for="">Amount</label>
      <input type="text" class="form-control" placeholder="Amount" asp-for="Amount" id="amount">
   </div>
   <div class="col">
      <label for="">No of Payment</label>
      <input type="text" class="form-control" placeholder="Enter Number of Payment" asp-for="NoOfPayment" id="noOfPayment">
   </div>
</div>

<div class="row g-3">
   <div class="col">
       <label for="">Deduction</label>
      <input type="text" class="form-control" placeholder="Enter Deduction"  asp-for="Deduction" id="deduction">
   </div>
   <div class="col">
      <label for="">Type</label>
      <select asp-for="Type" id="cars" name="cars">
            <option value="0.1">Daily</option>
            <option value="0.3">Weekly</option>
            <option value="0.5">Monthly</option>
      </select>
   </div>
</div>

<div class="row g-3">
   <div class="col">
      <label for="">Interest</label>
      <input type="text" class="form-control" placeholder="Interest"  id="interest" asp-for="Interest">
   </div>
   <div class="col">
      <label for="">Date Created</label>
      <input type="text" class="form-control" placeholder="Enter Number of Payment" asp-for="DateCreated" type="date" class="form-row" value="@DateTime.Now.ToString("yyyy-MM-dd")" readonly />
   </div>
</div>

<div class="row g-3">
   <div class="col">
      <label for="">Reciebale Amount</label>
      <input type="text" class="form-control" placeholder="Recievable Amount" asp-for="RecievableAmount" id="receivableAmount" type="number">
   </div>
   <div class="col">
       <label for="">Due Date</label>
      <input type="text" class="form-control" placeholder="Enter Number of Payment" asp-for="DueDate" type="date">
   </div>
</div>

<button type="submit" class="btn btn-primary">Submit</button>
</form>


<script>
   const typeSelect = document.getElementById('cars');
   const interestInput = document.getElementById('interest');
   const noOfPaymentInput = document.getElementById('noOfPayment');
   const deductionInput = document.getElementById('deduction');
   const amountInput = document.getElementById('amount');
   const receivableAmountInput = document.getElementById('receivableAmount');

   typeSelect.addEventListener('change', function() {
      const selectedType = parseFloat(this.value);
      let defaultInterest = 0;

      if (selectedType === 0.1) {
         defaultInterest = 0.01; 
      } else if (selectedType === 0.3) {
         defaultInterest = 0.03;
      } else if (selectedType === 0.5) {
         defaultInterest = 0.05;
      }

      const calculatedInterest = defaultInterest;
      interestInput.value = calculatedInterest.toFixed(2);

      const noOfPayment = parseFloat(noOfPaymentInput.value);
      const deduction = parseFloat(deductionInput.value);
      const amount = parseFloat(amountInput.value);

      const receivableAmount = amount * calculatedInterest;
      const result1 = receivableAmount * noOfPayment;
      const result = amount - result1;
      receivableAmountInput.value = result.toFixed(2);
   });
</script>
